---
title: "Show HN: CodeRLM – Tree-sitter-backed code indexing for LLM agents"
url: "https://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md"
source: "Hacker News"
date: 2026-02-12
score: 43
---

# Show HN: CodeRLM – Tree-sitter-backed code indexing for LLM agents

**来源**: [Hacker News](https://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md) | **热度**: 43

## 原文内容

Title: coderlm/server/REPL_to_API.md at main · JaredStewart/coderlm

URL Source: http://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md

Markdown Content:
REPL to API Mapping
-------------------

[](http://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md#repl-to-api-mapping)
This document maps each REPL operation from the CoderLM design (see `PURPOSE.md`) to its corresponding API endpoint. Use this as the reference when building the agent skill that wraps these HTTP calls.

All endpoints are prefixed with `http://
:
/api/v1`. Examples assume `localhost:3000`.

Every request (except health, session creation, and admin endpoints) **must** include the `X-Session-Id` header. The session ties the request to a specific project.

* * *

Session management
------------------

[](http://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md#session-management)
Before using any other operation, the agent creates a session **with the working directory** of the project it wants to explore. The server indexes that directory (if not already known) and returns a `session_id` scoped to that project.

| Operation | Method | Endpoint | Body / Params | Notes |
| --- | --- | --- | --- | --- |
| List sessions | GET | `/sessions` | — | All active sessions (admin). No session header needed |
| Create session | POST | `/sessions` | `{ "cwd": "/path/to/project" }` | Indexes project if new; returns `{ session_id, created_at, project }` |
| Check session | GET | `/sessions/:id` | — | Returns session info including project path |
| End session | DELETE | `/sessions/:id` | — | Cleans up history |

# Create — pass the project directory as cwd
SESSION=$(curl -s -X POST localhost:3000/api/v1/sessions \
 -H "Content-Type: application/json" \
 -d '{"cwd":"/home/user/myproject"}' | jq -r .session_id)

# Use on all subsequent requests
curl -H "X-Session-Id: $SESSION" ...

If the project was evicted due to capacity limits, requests using that session will return `410 Gone`. Create a new session to re-index.

* * *

structure
---------

[](http://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md#structure)
View the codebase file tree. Equivalent to running `tree` with ignore filtering applied.

| REPL operation | Method | Endpoint | Params / Body |
| --- | --- | --- | --- |
| `structure` | GET | `/structure` | `?depth=N` (0 = unlimited) |
| `structure define $file` | POST | `/structure/define` | `{ "file": "...", "definition": "..." }` |
| `structure redefine $file` | POST | `/structure/redefine` | `{ "file": "...", "definition": "..." }` |
| `structure mark $file $type` | POST | `/structure/mark` | `{ "file": "...", "mark": "..." }` |

### Response: `GET /structure`

[](http://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md#response-get-structure)

{
  "tree": "├── src/\n│ ├── main.rs\n│ └── lib.rs\n└── Cargo.toml\n",
  "file_count": 42,
  "language_breakdown": [
    { "language": "rust", "count": 38 },
    { "language": "toml", "count": 4 }
  ]
}

### Mark types

[](http://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md#mark-types)
`documentation`, `ignore`, `test`, `config`, `generated`, `custom`

### Skill usage pattern

[](http://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md#skill-usage-pattern)

# 1. Get the structure to orient
curl -s -H "X-Session-Id: $SID" "localhost:3000/api/v1/structure?depth=2"

# 2. Annotate files as the agent learns about them
curl -s -X POST -H "X-Session-Id: $SID" -H "Content-Type: application/json" \
  localhost:3000/api/v1/structure/define \
  -d '{"file":"src/main.rs","definition":"CLI entrypoint, parses args and starts the server"}'

# 3. Mark test directories
curl -s -X POST -H "X-Session-Id: $SID" -H "Content-Type: application/json" \
  localhost:3000/api/v1/structure/mark \
  -d '{"file":"tests/integration.rs","mark":"test"}'

* * *

symbol list
-----------

[](http://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md#symbol-list)
List symbols extracted from the codebase. Defaults to all kinds; filter with query params.

| REPL operation | Method | Endpoint | Params |
| --- | --- | --- | --- |
| `symbol list` | GET | `/symbols` | `?limit=100` |
| `symbol list` (functions only) | GET | `/symbols` | `?kind=function&limit=100` |
| `symbol list` (single file) | GET | `/symbols` | `?file=src/main.rs&limit=100` |
| `symbol list` (combined filter) | GET | `/symbols` | `?kind=function&file=src/main.rs&limit=100` |

### Kind values

[](http://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md#kind-values)
`function`, `method`, `class`, `struct`, `enum`, `trait`, `interface`, `constant`, `variable`, `type`, `module`

### Response

[](http://github.com/JaredStewart/coderlm/blob/main/server/REPL_to_API.md#response)

{
  "count": 3,
  "symbols": [
    {
      "name": "run_server",
      "kind": "function",
      "file": "src/main.rs",
      "line_range": [69, 143],
      "signature": "async

---
*自动采集于 2026-02-12 15:12:38 (北京时间)*
